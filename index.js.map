{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  const APIKEY = '46229228-83a12c4f45cb396a8637e93cb';\n  const URL = `https://pixabay.com/api/?key=${APIKEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n  try {\n    const response = await axios.get(URL);\n    return response.data;\n  } catch (error) {\n    console.error('Error:', error);\n    return { hits: [], totalHits: 0 };\n  }\n}","export function renderImages(images) {\n  const gallery = document.querySelector(\".gallery\");\n\n  const markup = images.map(image => \n    `<li class=\"gallery-item\">\n      <div class=\"info-container\">\n        <a href=\"${image.largeImageURL}\" class=\"link\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n        </a>\n        <div class=\"info\">\n          <p class=\"info-item\"><span class=\"name-info\">Likes</span> ${image.likes}</p>\n          <p class=\"info-item\"><span class=\"name-info\">Views</span> ${image.views}</p>\n          <p class=\"info-item\"><span class=\"name-info\">Comments</span> ${image.comments}</p>\n          <p class=\"info-item\"><span class=\"name-info\">Downloads</span> ${image.downloads}</p>\n        </div>\n      </div>\n    </li>`\n  ).join('');  \n\n  gallery.insertAdjacentHTML('beforeend', markup);\n}","import { fetchImages } from \"./js/pixabay-api\";\nimport { renderImages } from \"./js/render-functions\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst form = document.querySelector(\"#form-input\");\nconst gallery = document.querySelector(\".gallery\");\nconst loading = document.querySelector(\"#loadingId\");\nconst loadMore = document.querySelector('#load-more');\nlet lightbox;\nlet currentPage = 1;\nlet query = '';\nconst perPage = 15;\n\nloadMore.classList.add('hidden');\n\nloadMore.addEventListener(\"click\", async () => {\n  currentPage++;\n  showLoader();\n\n  try {\n    const { hits: images, totalHits } = await fetchImages(query, currentPage, perPage);\n    hideLoader();\n\n    if (images.length === 0) {\n      iziToast.error({\n        message: 'Sorry, there are no more images to load.',\n        position: 'topCenter',\n      });\n      loadMore.classList.add('hidden');\n    } else {\n      renderImages(images);\n\n      manageLightbox();\n\n      const { height: cardHeight } = document.querySelector(\".gallery\").firstElementChild.getBoundingClientRect();\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: \"smooth\",\n      });\n\n      const totalLoadedImages = document.querySelectorAll('.gallery-item').length;\n      if (totalLoadedImages >= totalHits) {\n        loadMore.classList.add('hidden');\n        iziToast.info({\n          message: \"We're sorry, but you've reached the end of search results.\",\n          position: 'topCenter',\n        });\n      }\n    }\n  } catch (error) {\n    hideLoader();\n    iziToast.error({\n      message: 'Something went wrong, please try again later.',\n      position: 'topCenter',\n    });\n  }\n});\n\nform.addEventListener(\"submit\", async event => {\n  event.preventDefault();\n  query = document.querySelector('input[name=\"Search\"]').value.trim();\n\n  if (query === '') {\n    iziToast.error({\n      message: 'Please enter a search term.',\n      position: 'topCenter',\n    });\n    gallery.innerHTML = '';\n    form.reset();\n    return;\n  }\n\n  currentPage = 1;\n  gallery.innerHTML = ''; \n  showLoader();\n\n  try {\n    const { hits: images, totalHits } = await fetchImages(query, currentPage, perPage);\n    hideLoader();\n\n    if (images.length === 0) {\n      iziToast.error({\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topCenter',\n      });\n      gallery.innerHTML = '';\n      form.reset();\n      loadMore.classList.add('hidden');\n    } else {\n      renderImages(images);\n      manageLightbox();\n      if (totalHits > perPage) {\n        loadMore.classList.remove('hidden');\n      } else {\n        loadMore.classList.add('hidden');\n      }\n    }\n  } catch (error) {\n    hideLoader();\n    iziToast.error({\n      message: 'Something went wrong, please try again later.',\n      position: 'topCenter',\n    });\n    gallery.innerHTML = '';\n    form.reset();\n  }\n});\n\nfunction showLoader() {\n  loading.classList.remove('hidden');\n}\n\nfunction hideLoader() {\n  loading.classList.add('hidden');\n}\n\nfunction manageLightbox() {\n  if (lightbox) {\n    lightbox.destroy();\n  }\n  lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: \"alt\",\n    captionPosition: \"bottom\",\n    captionDelay: 250,\n  });\n}\n"],"names":["fetchImages","query","page","perPage","URL","axios","error","renderImages","images","gallery","markup","image","form","loading","loadMore","lightbox","currentPage","showLoader","totalHits","hideLoader","iziToast","manageLightbox","cardHeight","event","SimpleLightbox"],"mappings":"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"}